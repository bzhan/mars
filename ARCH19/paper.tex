\documentclass[runningheads,a4paper]{llncs}
\usepackage{makeidx}
\usepackage{amssymb}
\usepackage{amscd, amsfonts}
\usepackage{verbatim}
\usepackage{listings}
\usepackage{commath}
\usepackage{float}
\usepackage{tikz}
\usepackage{stmaryrd}
\usepackage{isabelle}
\usepackage{isabellesym}

\usepackage{lmodern}
\usepackage[T1]{fontenc}

\isabellestyle{tt}

\newcommand{\isato}{\isasymrightarrow}
\newcommand{\isaTo}{\isasymRightarrow}
\newcommand{\isain}{\isasymin}
\newcommand{\isaiff}{\isasymlongleftrightarrow}
\newcommand{\isaand}{\isasymand}
\newcommand{\dL}{\mathsf{d}\mathcal{L}}

\lstset{
  mathescape,
  columns=fullflexible,
  basicstyle=\small\fontfamily{lmvtt}\selectfont
}

% Allow display breaks
\allowdisplaybreaks[1]

\begin{document}

\author{}
\institute{}

\title{ARCH-COMP19 Category Report: Hybrid Systems Theorem Proving}

\maketitle

\begin{abstract}
  Report for HHL Prover
\end{abstract}


\begin{itemize}
\item Introduction to HHL Prover (shorter than last year).
\item Ghost rule and cut rule (need to account for the differences
  between dL and HCSP).
\item Verification of differential invariants using quantifier
  elimination in redlog (as an oracle in Isabelle).
\item Invariant generation for the lunar lander example (by Mar 24,
  removed dependency on Mathematica).
\item Examples:
  \begin{itemize}
  \item Design shapes and nonlinear continuous models (translated some
    examples to HCSP, finish by Mar 24).
  \item Lunar lander example (case study benchmarks, using invariant
    generation).
  \item Rollercoaster example (case study benchmarks, invariant
    checking).
  \end{itemize}
\end{itemize}

\paragraph{Verification of differential invariants.}

For the newest version of the HHL Prover, we added an invariant
checker using quantifier elimination from the external tool
Redlog. Invoking Redlog from Isabelle follows the same pattern as for
invariant generation. First, the goal to be proved, which may contain
both entailments (of the form $p\implies q$) and preservation of
invariant by a differential equation (of the form
$\mathtt{exeFlow}(\mathbf{x'}=f(\mathbf{x}),I)\implies I$), is
translated from Isabelle's abstract syntax tree to JSON format. Next,
the JSON file is translated to the input for Redlog using a Python
script. In this step, preservation of invariant is converted to
appropriate entailments involving the domain of evolution and the Lie
derivative of the invariant. Finally, Redlog is invoked on the output
of the Python script and checks each of the resulting
entailments. This sequence is implemented as a bash script and invoked
by an oracle in Isabelle, which checks the final output produced by
Redlog. The entire process is automatic, after the user supplies the
invariant in usual mathematical notation, and a list of constants that
are relevant for quantifier elimination.

\paragraph{Example: design shapes and nonlinear continuous models.}

We translated some of the examples in the first two parts of the
benchmarks to HCSP. There are some essential differences between the
semantics of $\dL$ and HCSP. In particular, in HCSP, evolution by a
differential equation cannot stop before reaching the boundary (or
interrupted by a communication). Also, there is no assignment to an
arbitrary value ($x := *$) in HCSP. As a result, some of the examples
cannot be translated naturally. For those examples that can be
translated naturally, we proved some of them in Isabelle, with the
help of invariant checking using Redlog (details to be completed by
Mar 24).

\paragraph{Example: Roller coaster.}

We converted the roller coaster example \cite{coasterx} to HCSP. The
conversion is natural, as the differences between $\dL$ and HCSP does
not produce any problems. The proof makes use of invariant checking
using Redlog, as well as the newly added differential ghost rule. The
entire Isabelle theory (including the model, specification, and proof
for all ten parts of the example) is 1141 lines long.


\bibliographystyle{splncs04}
\bibliography{main}

\end{document}
